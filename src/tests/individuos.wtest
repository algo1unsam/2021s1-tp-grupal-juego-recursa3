import paqueteSecundario.individuos.*
import paqueteSecundario.objetos.*
import wollok.game.*
import paqueteSecundario.direcciones.*
describe "TEST DE INDIVIDUO"{
	fixture{
		personaje.agregarObjeto(mochilaGrande)
		personaje.agregarObjeto(espadaChica)
		personaje.agregarObjeto(escudoGrande)
	}
test "EL INDIVIDUO TIENE MOCHILA GRANDE Y DENTRO DE LA MOCHILA TIENE UNA ESPADA CHICA Y UN ESCUDO GRANDE"{
	assert.equals(mochilaGrande,personaje.mochila())
	assert.equals([espadaChica,escudoGrande],mochilaGrande.objetosGuardados())
}
test "EL INDIVIDUO DECIDE DEJAR UN OBJETO PORQUE LE OCUPA ESPACIO"{
	personaje.desecharObjeto(espadaChica)
	assert.equals([escudoGrande],mochilaGrande.objetosGuardados())
}

test "EL INDIVIDUO AL AGARRAR LA ESPADA GRANDE DESECHA LA ESPADA CHICA."{
	personaje.agregarObjeto(espadaGrande)
	assert.notThat(mochilaGrande.objetosGuardados().any({objeto=>objeto==espadaChica}))
	assert.notThat(personaje.mano1()==espadaChica)
	assert.that(mochilaGrande.objetosGuardados().any({objeto=>objeto==espadaGrande}))
	assert.that(personaje.mano1()==espadaGrande)
}

test "EL PERSONAJE AGARRA 3 LLAVES Y UTILIZA UNA, LE QUEDAN 2"{
	3.times({i=>personaje.agregarObjeto(llave)})
	personaje.utilizarObjeto(llave)
	assert.equals(2,personaje.cantidadLlaves())
	
}
test "EL PERSONAJE ATACA A UN RIVAL HASTA DEJARLO CON 50 VIDA"{
	personaje.position(game.at(5,5))
	personaje.orientacion(arriba)
	enemigo.position(game.at(5,6))
	game.addVisual(personaje)
	game.addVisual(enemigo)
	5.times({i=>personaje.atacar()})
	assert.equals(50,enemigo.vida())		
}

test "EL PERSONAJE ATACA AL ENEMIGO HASTA MATARLO"{
	personaje.position(game.at(5,5))
	personaje.orientacion(arriba)
	enemigo.position(game.at(5,6))
	game.addVisual(personaje)
	game.addVisual(enemigo)
	10.times({i=>personaje.atacar()})
	assert.equals(0,enemigo.vida())	
	assert.notThat(game.hasVisual(enemigo))
}
}